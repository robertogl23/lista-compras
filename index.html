<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Lista de Compras</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        :root {
            --bg-body-light: #f5f5fb;
            --bg-card-light: #ffffff;
            --text-main-light: #111827;
            --thead-light: #f0f0ff;
            --td-alt-light: #fafaff;

            --bg-body-dark: #0c0d10;
            --bg-card-dark: #1a1c22;
            --text-main-dark: #e8e8e8;
            --thead-dark: #1e1f25;
            --td-alt-dark: #16181e;

            --primary: #6366f1;
            --primary-soft: rgba(99, 102, 241, 0.08);
            --danger: #ef4444;
            --text-muted: #6b7280;
            --radius-lg: 18px;
            --shadow-soft: 0 12px 30px rgba(15, 23, 42, 0.10);
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            font-family: system-ui, sans-serif;
            background: var(--bg-body-light);
            color: var(--text-main-light);
            min-height: 100vh;
            display: flex;
            align-items: stretch;
            justify-content: center;
            padding: 12px;
            transition: background .25s, color .25s;
        }

        body[data-theme="dark"] {
            background: var(--bg-body-dark);
            color: var(--text-main-dark);
        }

        .app {
            width: 100%;
            max-width: 900px;
            background: var(--bg-card-light);
            border-radius: 24px;
            box-shadow: var(--shadow-soft);
            padding: 18px 14px;
            display: flex;
            flex-direction: column;
            gap: 14px;
            transition: background .25s;
        }

        body[data-theme="dark"] .app {
            background: var(--bg-card-dark);
        }

        h2 {
            font-size: 1.35rem;
            margin: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .badge-pill {
            font-size: 0.70rem;
            padding: 2px 8px;
            border-radius: 999px;
            border: 1px solid var(--primary);
            background: var(--primary-soft);
            color: var(--primary);
        }

        .form-card {
            padding: 12px;
            border-radius: var(--radius-lg);
            border: 1px solid #d1d1d1;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 0.7fr auto;
            gap: 10px;
        }

        .form-input {
            border-radius: 999px;
            border: 1px solid #d1d5db;
            padding: 8px 12px;
            outline: none;
        }

        button {
            cursor: pointer;
            border: none;
        }

        .btn-primary,
        .btn-outline,
        .btn-danger {
            border-radius: 999px;
            padding: 8px 10px;
        }

        .btn-primary {
            background: var(--primary);
            color: #fff;
        }

        .btn-outline {
            background: #ffffff;
            border: 1px solid #d1d5db;
        }

        body[data-theme="dark"] .btn-outline {
            background: #2a2c33;
            border-color: #3b3e46;
            color: #e8e8e8;
        }

        .btn-danger {
            background: var(--danger);
            color: #fff;
        }

        .table-card {
            border-radius: var(--radius-lg);
            border: 1px solid #e5e7eb;
            overflow: hidden;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: var(--thead-light);
        }

        body[data-theme="dark"] thead {
            background: var(--thead-dark);
        }

        td, th {
            padding: 8px 12px;
        }

        tbody tr:nth-child(even) {
            background: var(--td-alt-light);
        }

        body[data-theme="dark"] tbody tr:nth-child(even) {
            background: var(--td-alt-dark);
        }
    </style>
</head>
<body>

<div class="app">
    <h2>
        üõí Lista de compras
        <span class="badge-pill">LocalStorage</span>
    </h2>

    <button id="btnTheme" class="btn-outline">üåô / ‚òÄÔ∏è</button>

    <section class="form-card">
        <form id="formArticulo">
            <div class="form-row">
                <input id="nombre" class="form-input" placeholder="Art√≠culo..." required />
                <input id="cantidad" class="form-input" placeholder="Cantidad..." />
                <button class="btn-primary" id="btnGuardar">Agregar</button>
            </div>
            <input type="hidden" id="articuloId" />
        </form>
    </section>

    <section class="table-card">
        <table>
            <thead>
                <tr>
                    <th>Art√≠culo</th>
                    <th>Cantidad</th>
                    <th></th>
                </tr>
            </thead>
            <tbody id="tablaCuerpo"></tbody>
        </table>
    </section>

    <button class="btn-outline" id="btnResetLista">Restablecer lista inicial</button>
</div>

<script>
    const STORAGE_KEY = "listaCompras";
    const THEME_KEY = "themeMode";

    const listaInicial = [
        { id: 1, nombre: "Pa√±ales", cantidad: "" },
        { id: 2, nombre: "Papel de ba√±o", cantidad: "" },
        { id: 3, nombre: "Suavitel", cantidad: "" },
        { id: 4, nombre: "Espuma para afeitar", cantidad: "" },
        { id: 5, nombre: "Mamilas", cantidad: "" },
        { id: 6, nombre: "Calentador de mamilas", cantidad: "" },
        { id: 7, nombre: "Esterilizador", cantidad: "" },
        { id: 8, nombre: "Leche", cantidad: "" },
        { id: 9, nombre: "Toallas femeninas", cantidad: "" },
        { id: 10, nombre: "Shampoo", cantidad: "" }
    ];

    let articulos = [];

    const form = document.getElementById("formArticulo");
    const nombreInput = document.getElementById("nombre");
    const cantidadInput = document.getElementById("cantidad");
    const articuloId = document.getElementById("articuloId");
    const btnGuardar = document.getElementById("btnGuardar");
    const btnReset = document.getElementById("btnResetLista");
    const switchTheme = document.getElementById("btnTheme");

    function cargarDesdeStorage() {
        const raw = localStorage.getItem(STORAGE_KEY);
        articulos = raw ? JSON.parse(raw) : [...listaInicial];
        guardarEnStorage();
    }

    function guardarEnStorage() {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(articulos));
    }

    function renderTabla() {
        const tbody = document.getElementById("tablaCuerpo");
        tbody.innerHTML = "";

        articulos.forEach(item => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
                <td>${item.nombre}</td>
                <td>${item.cantidad || "‚Äî"}</td>
                <td>
                    <button class="btn-outline btn-edit" data-id="${item.id}">‚úèÔ∏è</button>
                    <button class="btn-danger btn-delete" data-id="${item.id}">üóëÔ∏è</button>
                </td>
            `;
            tbody.appendChild(tr);
        });

        tbody.querySelectorAll(".btn-delete").forEach(btn => {
            btn.addEventListener("click", () => eliminarArticulo(+btn.dataset.id));
        });

        tbody.querySelectorAll(".btn-edit").forEach(btn => {
            btn.addEventListener("click", () => editarArticulo(+btn.dataset.id));
        });
    }

    function agregarArticulo(nombre, cantidad) {
        const id = articulos.length ? Math.max(...articulos.map(x => x.id)) + 1 : 1;
        articulos.push({ id, nombre, cantidad });
        guardarEnStorage();
        renderTabla();
    }

    function actualizarArticulo(id, nombre, cantidad) {
        const i = articulos.findIndex(x => x.id === id);
        articulos[i].nombre = nombre;
        articulos[i].cantidad = cantidad;
        guardarEnStorage();
        renderTabla();
    }

    function editarArticulo(id) {
        const item = articulos.find(x => x.id === id);
        nombreInput.value = item.nombre;
        cantidadInput.value = item.cantidad;
        articuloId.value = item.id;
        btnGuardar.textContent = "Actualizar";
    }

    function eliminarArticulo(id) {
        const item = articulos.find(x => x.id === id);
        if (!confirm(`¬øSeguro que quieres eliminar "${item.nombre}"?`)) return;

        articulos = articulos.filter(x => x.id !== id);
        guardarEnStorage();
        renderTabla();
    }

    function limpiarFormulario() {
        form.reset();
        articuloId.value = "";
        btnGuardar.textContent = "Agregar";
    }

    function toggleTheme() {
        const newTheme = document.body.dataset.theme === "dark" ? "light" : "dark";
        document.body.dataset.theme = newTheme;
        localStorage.setItem(THEME_KEY, newTheme);
    }

    document.addEventListener("DOMContentLoaded", () => {
        cargarDesdeStorage();
        renderTabla();

        const themeStored = localStorage.getItem(THEME_KEY) || "light";
        document.body.dataset.theme = themeStored;

        form.addEventListener("submit", e => {
            e.preventDefault();
            const nombre = nombreInput.value.trim();
            const cantidad = cantidadInput.value.trim();
            const id = articuloId.value.trim();

            if (!nombre) return alert("Escribe un art√≠culo.");

            id ? actualizarArticulo(+id, nombre, cantidad)
               : agregarArticulo(nombre, cantidad);

            limpiarFormulario();
        });

        btnReset.addEventListener("click", () => {
            if (!confirm("¬øRestablecer lista original?")) return;
            articulos = [...listaInicial];
            guardarEnStorage();
            renderTabla();
        });

        switchTheme.addEventListener("click", toggleTheme);
    });
</script>

</body>
</html>
